{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Django Schema Viewer</title>
    <link rel="stylesheet" href="{% static 'schema_viewer/css/schema-viewer.css' %}">
</head>
<body>
    <div class="container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1>Schema Viewer</h1>
            </div>
            <div class="search-box">
                <input type="text" id="search" placeholder="Search models...">
            </div>
            <div class="model-list" id="model-list">
                <div class="loading">Loading schema...</div>
            </div>
        </aside>

        <main class="main">
            <div class="toolbar">
                <button id="zoom-in">Zoom In</button>
                <button id="zoom-out">Zoom Out</button>
                <button id="fit-view">Fit View</button>
                <button id="re-layout">Re-layout</button>
                <label>
                    <input type="checkbox" id="show-django" />
                    Show Django models
                </label>
            </div>
            <div class="canvas-container">
                <svg id="canvas"></svg>
                <!-- Legend -->
                <div class="legend">
                    <div class="legend-title">Relationships</div>
                    <div class="legend-item">
                        <div class="legend-line fk"></div>
                        <span>Foreign Key (many â†’ one)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-line o2o"></div>
                        <span>One-to-One</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-line m2m"></div>
                        <span>Many-to-Many</span>
                    </div>
                </div>
            </div>
        </main>

        <aside class="detail-panel" id="detail-panel">
            <div class="detail-header">
                <h2 id="detail-title">Model Details</h2>
                <button class="close-btn" id="close-detail">&times;</button>
            </div>
            <div id="detail-content">
                <!-- Populated by JavaScript -->
            </div>
        </aside>
    </div>

    <script src="{% static 'schema_viewer/js/utils.js' %}"></script>
    <script src="{% static 'schema_viewer/js/markers.js' %}"></script>
    <script src="{% static 'schema_viewer/js/layout.js' %}"></script>
    <script src="{% static 'schema_viewer/js/canvas.js' %}"></script>
    <script>
        // Initialize the schema viewer when DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            SchemaViewer.init();
        });
    </script>
</body>
</html>
